\newpage
\section{Réalisation}
\label{sec:realisation}

\paragraph{}Dans cette section nous présentons la réalisation du site web.
\subsection{Pattern Général}
\label{sec:pattern}
\paragraph{}Le pattern général d'une page du site web est le suivant:
\begin{itemize}
\item Le Header insérer dans une page grâce à PHP
\item Le contenu: varie selon la page
\item Le footer inserer dans une page grâce à PHP
\end{itemize}
\begin{figure}[H]
	\centering
		\includegraphics[width=0.75\textwidth]{img/maquette_all.png}
		\caption{A gauche: la maquette du site normal; A droite: la maquette du site lorsque l'utilisateur a déroulé la page}
	\label{fig:maquette}
\end{figure}

\subsection{Récupération des données}
\paragraph{}
Dans ce projet nous utilisons les données publiques des établissements d'enseignement supérieur en France recensés
par l'ONISEP (métropole et outre-mer) (liste 2 disponible en « open data » sur https://www.data.gouv.fr/).
La récupération de ces données se fait grace à la fonction php fgetcsv.

\subsection{Recherche et tri}
\paragraph{La recherche} d'un établissement peut se faire selon différents critères :
\begin{itemize}
 \item l'UAI (code d'identification d'un établissement)
 \item le nom de l'établissement
 \item l'adresse de l'établissement
 \item le numéro de téléphone de l'établissement
\end{itemize}
\paragraph{}
On peut grace à un formulaire choisir notre critère de recherche puis entrer le champ à chercher.
Après validation du formulaire en appuyant sur le bouton recherche, le ou les resultat(s) est(sont) affiché(s) sous forme de liste dans la partie contenu de la page.
On peut alors cliquer sur le lien pour accéder à la établissement de la recherche.

\paragraph{Le tri} (ou recherche multi-critères) permet à l'utilisateur de filter sa recherche. 
Le tri se fait se fait également selon certains critères :
\begin{itemize}
 \item par région
 \item par académie
 \item par ville
 \item par type (ecole d'art, d'ingénieurs ...)
\end{itemize}

\paragraph{}
De la même manière que la recherche, le choix des critères de tri se fait par un fomulaire.
Les champs de ses formulaire sont dynamique, si on ajoute un nouveau type d'établissement par exemple, il sera automatiquement ajouté à la liste dans le formulaire.
Lorsque le formulaire est validé, les résultats sont également affichés sous forme de liste dans la partie contenu de la page.
\paragraph{}
L'utilisateur peut affiner sa recherche/son tri en remplissant plusieurs champs du formulaire. 
Les critères de selections dans le csv seront alors cumulés.


\subsection{Page Établissement}
\label{sec:etablissement}
\paragraph{}La page établissement est accessible seulement via un lien généré par les pages Recherche, Tri et Historique. 
En effet ce lien contient 2 variables acompagnées de leur valeur, envoyées par methode GET. 
Ces deux variables sont l'UAI de l'établissement, unique à chaque établissements, mais aussi le numéro de téléphone de la composante, car dans la base de données nous pouvons trouvez plusieurs composantes d'un même établissement, et ainsi l'UAI ne suffit plus car il est le même pour ces différentes composantes. 
Le numéro de Téléphone permet donc de différencier les différentes composantes d'un même établissement et ainsi d'être plus précis sur l'établissement visé par l'utilisateur.
\paragraph{}Lorsqu'un utilisateur clique sur le lien d'un établissement, le serveur récupère les deux valeurs et génère la page avec toutes les informations de l'établissement, en faisant une recherche dans le fichier des données. 
Le contenu de la page établissement est composé de la manière suivante:
\begin{itemize}
\item Les détails de l'établissement avec:
\begin{itemize}
\item Le nom de l'établissement
\item Le type d'établissement
\item Le statut de l'établissement
\item Le SIRET de l'établissement (si l'établissement en possède un)
\item Le sigle de l'établissement (si l'établissement en possède un)
\item Et la tutelle de l'établissement
\end{itemize}
\item Les informations pratiques (Contact):
\begin{itemize}
\item L'adresse de l'établissement
\item La région de l'établissement
\item Le numéro de téléphone de l'établissement
\item Le lien de la fiche ONISEP de l'établissement
\item Les horaires d'ouvetures (si celle ci sont renseignés)
\end{itemize}
\item Enfin un carte Google Map interactive sur laquelle un marqueur est placé aux coordonnées exactes de l'établissement
\end{itemize}
\begin{figure}[H]
	\centering
		\includegraphics[width=0.75\textwidth]{img/etablissement_content.png}
		\caption{Exemple de contenu d'une page établissement (ici l'UFR S&T de Cergy-Pontoise)}
	\label{fig:contentetablissement}
\end{figure}

\subsection{Statistiques graphiques}
L'utilisateur peut accéder à des statistiques sur le jeu de données sous forme de graphiques. 
Pour cela nous avons utilisé la bibliothèque JPGraph.

\begin{figure}[H]
	\centering
		\includegraphics[width=0.75\textwidth]{img/stat2.png}
		\caption{Un des résultats de la page statistique.php (ici la proportion de chaque type d'établissement)}
	\label{fig:contentetablissement}
\end{figure}

L'utilisateur a accés à trois graphiques différents :
\begin{itemize}
 \item la répartition des types d'établissements
 \item le nombre d'établissements par académie
 \item la répartition (en \%) des status des établissements
\end{itemize}

\subsection{Historique}
\paragraph{}L'utilisateur peut acceder sur la page "Historique" jusqu'aux 5 derniers établissements différents qu'il a consulté. L'historique de consultation de l'utilisateur est stocké dans un cookie pendant 30 jours, dans lequel est serializé le tableau des 5 établissements sous le format "UAI;Téléphone". Ainsi à lors de sa lecture, le cookie est déserializé, et le tableau stocké dans une variable temporaire afin de le lire et d'affiché son contenu. Lors de la consultation d'un établissement, le cookie est lu, et l'établissement en cours de consultation est ajouté au tableau si il ne l'est pas deja, apres que le dernière élement soit supprimé.
\begin{figure}[H]
	\centering
		\includegraphics[width=0.75\textwidth]{img/historique.png}
		\caption{Page "Historique"}
	\label{fig:historique}
\end{figure}

